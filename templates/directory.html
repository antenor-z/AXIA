{% extends 'base.html' %}

{% block title %} {{ current_path }} {% endblock %}

{% block content %}
{% include 'modalMkdir.html' %}
{% include 'modalCreate.html' %}
{% include 'modalUpload.html' %}
{% include 'modalRename.html' %}

<div class="dragFileArea" ondragenter="modalUploadDragFile(event)" ondrop="modalUploadInsertDroppedFiles(event)" ondragover="event.preventDefault()">
<toolbar>
    <a href="" onclick="modalUploadClick(event)">UPLOAD</a>
    <a href="" onclick="modalCreateClick(event)">CREATE</a>
    <a href="" onclick="modalMkdirClick(event)">MKDIR</a>
    <a href="/logout">EXIT</a>
</toolbar>

<header>
    {{ current_path }}
</header>

<table style="table-layout: fixed;" class="files">
{% for r in res %}
    <tr onclick="window.location.href = '{{r['path']}}'">
        <td style="overflow: hidden;">
            <span class="{{r['type']}}">{{ r['name'] }}</span>
        </td>
        <td style="color: rgba(255, 255, 255, 0.50); width: 10ch;">
            {{ r['size'] }}
        </td>
        <td style="color: rgba(255, 255, 255, 0.25); width: 16ch;">
            {{ r['created_at'] }}
            <span id="more-{{r['path']}}" style="display: none;" onclick="event.stopPropagation()">
                <br>
                <a href="{{r['rm_path']}}">[RM]</a> 
                <a href="" onclick="modalRenameClick(event, '{{ r['rename_path'] }}')">[RENAME]</a>
                {% if r['edit_path'] != none %}
                <a href="{{ r['edit_path'] }}">[EDIT AS TEXT]</a>
                {% endif %}
            </span>
        </td>
        <td style="width: 2ch;" onclick="toggleMore(event, '{{r['path']}}')">
            {% if r['type'] != 'up' %}
            <span>âž•</span>
            {% endif %}
        </td>
    </tr>
{% endfor %}
</table>
</div>

<script src="/static/toggleMore.js"></script>

{% endblock %}

